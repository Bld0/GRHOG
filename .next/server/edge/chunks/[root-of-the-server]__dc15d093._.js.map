{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 21, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/middleware.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\n\nexport function middleware(request: NextRequest) {\n  const { pathname } = request.nextUrl;\n  \n  // Public routes that don't require authentication\n  const publicRoutes = [\n    '/auth/sign-in',\n    '/auth/sign-up',\n    '/test',\n    '/api/test',\n    '/api/test-backend'\n  ];\n  \n  // Check if the route is public\n  if (publicRoutes.some(route => pathname.startsWith(route))) {\n    return NextResponse.next();\n  }\n  \n  // Protect dashboard and other private routes\n  if (pathname.startsWith('/dashboard') || \n      pathname.startsWith('/bins') || \n      pathname.startsWith('/clients') || \n      pathname.startsWith('/analytics') || \n      pathname.startsWith('/users')) {\n    \n    const authToken = request.cookies.get('auth-token')?.value;\n    \n    // If no auth token, redirect to sign-in\n    if (!authToken || authToken !== 'authenticated') {\n      const signInUrl = new URL('/auth/sign-in', request.url);\n      signInUrl.searchParams.set('redirect', pathname);\n      return NextResponse.redirect(signInUrl);\n    }\n  }\n  \n  // Create response\n  const response = NextResponse.next();\n  \n  // Add security headers\n  response.headers.set('X-Content-Type-Options', 'nosniff');\n  response.headers.set('X-Frame-Options', 'DENY');\n  response.headers.set('X-XSS-Protection', '1; mode=block');\n  \n  // Continue with the request\n  return response;\n}\n\nexport const config = {\n  matcher: [\n    // Skip Next.js internals and static files\n    '/((?!_next|[^?]*\\\\.(?:html?|css|js(?!on)|jpe?g|webp|png|gif|svg|ttf|woff2?|ico|csv|docx?|xlsx?|zip|webmanifest)).*)',\n    // Always run for API routes\n    '/(api|trpc)(.*)'\n  ]\n};\n"],"names":[],"mappings":";;;;AAAA;AAAA;;AAEO,SAAS,WAAW,OAAoB;IAC7C,MAAM,EAAE,QAAQ,EAAE,GAAG,QAAQ,OAAO;IAEpC,kDAAkD;IAClD,MAAM,eAAe;QACnB;QACA;QACA;QACA;QACA;KACD;IAED,+BAA+B;IAC/B,IAAI,aAAa,IAAI,CAAC,CAAA,QAAS,SAAS,UAAU,CAAC,SAAS;QAC1D,OAAO,6LAAA,CAAA,eAAY,CAAC,IAAI;IAC1B;IAEA,6CAA6C;IAC7C,IAAI,SAAS,UAAU,CAAC,iBACpB,SAAS,UAAU,CAAC,YACpB,SAAS,UAAU,CAAC,eACpB,SAAS,UAAU,CAAC,iBACpB,SAAS,UAAU,CAAC,WAAW;QAEjC,MAAM,YAAY,QAAQ,OAAO,CAAC,GAAG,CAAC,eAAe;QAErD,wCAAwC;QACxC,IAAI,CAAC,aAAa,cAAc,iBAAiB;YAC/C,MAAM,YAAY,IAAI,IAAI,iBAAiB,QAAQ,GAAG;YACtD,UAAU,YAAY,CAAC,GAAG,CAAC,YAAY;YACvC,OAAO,6LAAA,CAAA,eAAY,CAAC,QAAQ,CAAC;QAC/B;IACF;IAEA,kBAAkB;IAClB,MAAM,WAAW,6LAAA,CAAA,eAAY,CAAC,IAAI;IAElC,uBAAuB;IACvB,SAAS,OAAO,CAAC,GAAG,CAAC,0BAA0B;IAC/C,SAAS,OAAO,CAAC,GAAG,CAAC,mBAAmB;IACxC,SAAS,OAAO,CAAC,GAAG,CAAC,oBAAoB;IAEzC,4BAA4B;IAC5B,OAAO;AACT;AAEO,MAAM,SAAS;IACpB,SAAS;QACP,0CAA0C;QAC1C;QACA,4BAA4B;QAC5B;KACD;AACH"}}]
}