{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/ab/dev/grhog/GRHOG/src/features/overview/components/recent-transactions.tsx"],"sourcesContent":["'use client';\n\nimport { Avatar, AvatarFallback } from '@/components/ui/avatar';\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle\n} from '@/components/ui/card';\nimport { useBinUsages, useClients } from '@/hooks/use-api-data';\nimport { BinUsage, Client } from '@/types';\nimport { useMemo } from 'react';\n\nexport function RecentTransactions() {\n  const { data: binUsages, loading: binUsagesLoading, error: binUsagesError } = useBinUsages();\n  const { data: clients, loading: clientsLoading, error: clientsError } = useClients();\n\n  // Create a map of cardId to client for quick lookup\n  const clientsMap = useMemo(() => {\n    return clients.reduce((map, client) => {\n      map[client.cardId] = client;\n      return map;\n    }, {} as Record<string, Client>);\n  }, [clients]);\n\n  // Get the most recent 5 bin usages\n  const recentUsages = useMemo(() => {\n    return binUsages\n      .filter(a => a.cardId !== null)\n      .sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime())\n      .slice(0, 6);\n  }, [binUsages]);\n\n  if (binUsagesLoading || clientsLoading) {\n    return (\n      <Card className=\"w-full\">\n        <CardHeader>\n          <CardTitle>Сүүлийн хогний хэрэглээ</CardTitle>\n          <CardDescription>\n            Сүүлийн 5 хогний идэвхтэй хэрэглээ\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <div className=\"text-sm text-muted-foreground\">Ачааллаж байна...</div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  if (binUsagesError || clientsError) {\n    return (\n      <Card className=\"w-full\">\n        <CardHeader>\n          <CardTitle>Сүүлийн хогний хэрэглээ</CardTitle>\n          <CardDescription>\n            Сүүлийн 5 хогний идэвхтэй хэрэглээ\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <div className=\"text-sm text-destructive\">\n            Алдаа гарлаа: {binUsagesError || clientsError}\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <Card className=\"w-full\">\n      <CardHeader>\n        <CardTitle>Сүүлийн хэрэглээ</CardTitle>\n        <CardDescription>\n          Сүүлийн идэвхтэй хэрэглээ\n        </CardDescription>\n      </CardHeader>\n      <CardContent className=\"grid gap-8\">\n        {recentUsages.length === 0 ? (\n          <div className=\"text-sm text-muted-foreground\">\n            Хэрэглээний мэдээлэл олдсонгүй\n          </div>\n        ) : (\n          recentUsages.map((usage: BinUsage) => {\n            const client = clientsMap[usage.cardId];\n            const clientName = client?.name || `Card ${usage.cardId ? usage.cardId : '0000'}`;\n            const binLocation = usage.bin.location || `${usage.bin.binId || usage.bin.id}`;\n\n            return (\n              <div key={usage.id} className=\"flex items-center gap-4\">\n                <Avatar className=\"h-9 w-9 sm:flex\">\n                  <AvatarFallback>\n                    {clientName\n                      .split(' ')\n                      .map((name: string) => name[0])\n                      .join('')\n                      .toUpperCase()}\n                  </AvatarFallback>\n                </Avatar>\n                <div className=\"grid gap-1\">\n                  <p className=\"text-sm font-medium leading-none\">\n                    {clientName}\n                  </p>\n                  <p className=\"text-sm text-muted-foreground\">\n                    {binLocation}\n                  </p>\n                </div>\n                <div className=\"ml-auto font-medium\">\n                  <div className=\"text-right\">\n                    <div className=\"text-sm font-medium\">\n                      Хэрэглэсэн\n                    </div>\n                    <div className=\"text-xs text-muted-foreground\">\n                      {new Date(usage.createdAt).toLocaleDateString('mn-MN', {\n                        month: 'short',\n                        day: 'numeric',\n                        hour: '2-digit',\n                        minute: '2-digit'\n                      })}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            );\n          })\n        )}\n      </CardContent>\n    </Card>\n  );\n} "],"names":[],"mappings":"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","debugId":null}}]
}